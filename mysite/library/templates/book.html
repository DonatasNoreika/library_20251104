{% extends "base.html" %}


{% block "title" %}Knyga{% endblock %}

{% block "content" %}
{% if book.cover %}
<img src="{{ book.cover.url }}" style="max-width: 300px">
{% endif %}
<h1 class="display-6">Knyga:</h1>
<p><b>Pavadinimas: </b>{{ book.title }}</p>
<p><b>Autorius: </b>{{ book.author }}</p>
<p><b>ISBN: </b>{{ book.isbn }}</p>
<p><b>Žanras (-ai): </b>{{ book.display_genre }}</p>
<p>{{ book.summary }}</p>

<hr>
<h4>Komentarai:</h4>

{% if user.is_authenticated %}
<h2>Palikite atsiliepimą</h2>
<form method="post" class="mb-2">
    {% csrf_token %}
    {% load crispy_forms_tags %}
    {{ form | crispy }}
    <button type="submit" class="btn btn-secondary">Paskelbti</button>
</form>
{% endif %}

{% for review in book.reviews.all %}
<p><b>{{ review.reviewer }}</b>, <em>{{ review.date_created }}</em></p>
<p>{{ review.content }}</p>
<hr>
{% empty %}
<p>Nėra komentarų</p>
{% endfor %}

<h4>Knygos egzemplioriai:</h4>
{% for instance in book.instances.all %}
<p class="{% if instance.status == 't' %}text-danger{% elif instance.status == 'r' %}text-warning{% elif instance.status == 'a' %}text-success{% endif %}">{{ instance.get_status_display }}</p>
<p><b>Bus grąžinta: </b>{{ instance.due_back }}</p>
<small><b>ID: </b>{{ instance.uuid }}</small>
<hr>
{% empty %}
<p>Šios knygos egzempliorių neturime</p>
{% endfor %}

{% endblock %}